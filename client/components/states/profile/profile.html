<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)"><span ng-bind-html="alert.msg"></span></alert>

<user-avatar user="user"></user-avatar>
<hr/>

<div class="row text-center">
  <div class="col-xs-6 col-sm-3">
    <h4 class="">
      {{ user.armoires.length }}
    </h4>
    <span class="label label-info">Armoires</span>
  </div>

  <div class="col-xs-6 col-sm-3">
    <h4 class="">
      {{ user.totalItems }}
    </h4>
    <span class="label label-info">Items</span>
  </div>

  <div class="col-xs-6 col-sm-3">
    <h4 class="">
      {{ user.deliveries.length }}
    </h4>
    <span class="label label-info">Deliveries</span>
  </div>

  <div class="col-xs-6 col-sm-3">
    <h4 class="">
      {{ user.supportConvo.messages.length }}
    </h4>
    <span class="label label-info">Support Convos</span>
  </div>
</div>

<p>&nbsp;</p>

<form name="generalForm" class="well" ng-submit="generalFormSubmit()">
  <h3><i class="fa fa-fw fa-user h6"></i> Info</h3>

  <div class="row">
    <div class="col-sm-6">
      <div class="form-group"  show-errors>
        <label for="firstNameInput">First Name</label>
        <input id="firstNameInput" class="form-control"
               placeholder="First Name"
               floating-label
               ng-model="user.firstName">
      </div>
    </div>

    <div class="col-sm-6">
      <div class="form-group"  show-errors>
        <label for="lastNameInput">Last Name</label>
        <input id="lastNameInput" class="form-control"
               placeholder="Last Name"
               floating-label
               ng-model="user.lastName">
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <div class="form-group"  show-errors>
        <label for="emailInput">Email</label>
        <input id="emailInput" class="form-control"
               type="email"
               placeholder="Email"
               floating-label
               ng-model="user.local.email">
      </div>
    </div>

    <div class="col-sm-6">
      <div class="form-group"  show-errors>
        <label for="phoneInput">Phone Number</label>
        <input id="phoneInput" class="form-control"
               type="tel"
               placeholder="Phone"
               floating-label
               ng-model="user.phone">
      </div>
    </div>
  </div>

  <button type="submit" class="btn btn-primary" ng-disabled="generalForm.$invalid || generalForm.$pristine">Update</button>
</form>

<form name="addressForm" class="well" ng-submit="addressFormSubmit()">
  <h3><i class="fa fa-fw fa-building-o h6"></i> Address</h3>

  <div class="row">
    <div class="col-sm-8">
      <div class="form-group"  show-errors>
        <label for="aStreetInput">Street</label>
        <input id="aStreetInput" class="form-control"
               placeholder="Street"
               floating-label
               ng-model="user.address.street_1">
      </div>
    </div>

    <div class="col-sm-4">
      <div class="form-group"  show-errors>
        <label for="aStreetSecondaryInput">Apt/Suite</label>
        <input id="aStreetSecondaryInput" class="form-control"
               placeholder="Apt/Suite"
               floating-label
               ng-model="user.address.street_2">
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-8">
      <div class="form-group"  show-errors>
        <label for="aCityInput">City</label>
        <input id="aCityInput" class="form-control"
               placeholder="City"
               floating-label
               ng-model="user.address.city"
               typeahead="city for city in cities | filter:$viewValue | limitTo:8">
      </div>
    </div>

    <div class="col-sm-4">
      <div class="form-group"  show-errors>
        <label for="aZipInput">Zip</label>
        <input id="aZipInput" class="form-control"
               placeholder="Zip"
               floating-label
               ng-model="user.address.zip">
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-6">
      <div class="form-group"  show-errors>
        <label for="aStateInput">State</label>
        <select id="aStateInput" name="aStateInput" class="form-control"
                floating-label
                ng-model="user.address.state"
                ng-options="state.state as state.state for state in states"></select>
      </div>
    </div>

    <div class="col-xs-6">
      <div class="form-group"  show-errors>
        <label for="aCountryInput">Country</label>
        <select id="aCountryInput" class="form-control"
                floating-label
                ng-model="user.address.country"
                ng-options="country.country as country.country for country in regions"></select>
      </div>
    </div>
  </div>

  <button class="btn btn-primary" ng-disabled="addressForm.$invalid || addressForm.$pristine">Update Address</button>
</form>

<!-- Billing -->
<div billing user="user" mini="true" class="well"></div>
<!-- /Billing -->

<form name="passwordForm" class="well" ng-submit="passwordFormSubmit()">
  <h3><i class="fa fa-fw fa-key h6"></i> Password</h3>

  <div class="row">
    <div class="form-group col-sm-6" floating-label show-errors>
      <label for="passwordInput">Password</label>
      <input id="passwordInput" name="passwordInput" class="form-control"
             required
             type="password"
             placeholder="6-20 chars. 1 capitol. 1 number."
             floating-label
             ng-model="password"
             ng-pattern="validationPatterns.password">
    </div>

    <div class="form-group col-sm-6" floating-label show-errors>
      <label for="passwordRepeatInput">Repeat</label>
      <input id="passwordRepeatInput" name="passwordRepeatInput" class="form-control"
             type="password"
             required
             placeholder="Repeat new password"
             floating-label
             ng-model="passwordRepeatInput"
             require-mirror-input="passwordInput">
    </div>
  </div>

  <!--<span class="help-block"><small>Password must be 6 - 20 characters, and must include at least one upper case letter, one lower case letter, and one numeric digit.</small></span>-->

  <button type="submit" class="btn btn-primary" ng-disabled="passwordForm.$invalid || passwordForm.$pristine">Update
    Password
  </button>
</form>
